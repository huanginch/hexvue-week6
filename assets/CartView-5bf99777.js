import{w as f}from"./runtime-dom.esm-bundler-8a65992b.js";import{_ as v,o as i,c as r,a as e,t as l,r as a,F as p,a0 as w,$ as h,b as d,w as k,d as M}from"./_plugin-vue_export-helper-2967bb73.js";import{c as b}from"./cartStore-6d77dff7.js";import{m as F,a as L}from"./axios-264c7568.js";const N={name:"DeleteConfirmModal",props:["message","delFunc"],data(){return{modal:null}},methods:{open(){this.modal.show()},hide(){this.modal.hide()}},mounted(){this.modal=new window.bootstrap.Modal(document.getElementById("deleteModal"))}},V={id:"deleteModal",class:"modal text-black fade",tabindex:"-1"},x={class:"modal-dialog"},B={class:"modal-content rounded-0"},T=e("div",{class:"modal-header"},[e("h5",{class:"modal-title"},"再次確認"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),A={class:"modal-body"},D={class:"modal-footer"},S=e("button",{type:"button",class:"btn btn-secondary rounded-0","data-bs-dismiss":"modal"}," 取消 ",-1);function E(o,s,c,y,n,u){return i(),r("div",V,[e("div",x,[e("div",B,[T,e("div",A,[e("p",null,l(c.message),1)]),e("div",D,[S,e("button",{type:"button",class:"btn btn-primary rounded-0",onClick:s[0]||(s[0]=f(m=>{u.hide(),c.delFunc()},["prevent"]))}," 確定 ")])])])])}const Q=v(N,[["render",E]]);const q={name:"CartView",data(){return{message:"",delFunc:null}},computed:{...F(b,["carts","totalCart","final_total","isLoading"])},methods:{...L(b,["setCartQty","removeCart","removeAllCart"])},components:{DeleteConfirmModal:Q}},z={class:"cart container"},U=e("h1",null,"我的購物車",-1),j={class:"table text-white align-middle"},G=e("thead",null,[e("tr",null,[e("th",{scope:"col"}),e("th",{scope:"col"},"商品名稱"),e("th",{scope:"col"},"數量"),e("th",{scope:"col"},"商品價格"),e("th",{scope:"col"},"小計")])],-1),H={scope:"row"},J=["onClick"],K=["value","onChange"],O={class:"text-end"},P=e("hr",null,null,-1),R={class:"float-end"};function W(o,s,c,y,n,u){const m=a("iconify-icon"),C=a("router-link"),g=a("delete-confirm-modal"),$=a("MyLoading");return i(),r(p,null,[e("div",z,[U,e("table",j,[G,e("tbody",null,[(i(!0),r(p,null,w(o.carts,t=>(i(),r("tr",{key:t.id},[e("th",H,[e("button",{type:"button",class:"btn rounded-0 text-white",onClick:_=>{this.$refs.deleteModal.open(),n.message=`確定要刪除 ${t.product.title} 嗎?`,n.delFunc=o.removeCart.bind(this,t.id)}},[d(m,{icon:"material-symbols:delete-outline-sharp",class:"text-success fs-4 align-middle"})],8,J)]),e("td",null,l(t.product.title),1),e("td",null,[e("input",{type:"number",class:"form-control w-50",value:t.qty,onChange:_=>o.setCartQty(t.id,_),min:"1"},null,40,K)]),e("td",null,"$NT "+l(t.product.price),1),e("td",null,"$NT "+l(t.final_total),1)]))),128))])]),e("p",O,"總價格: $NT "+l(o.final_total),1),P,e("div",R,[e("a",{class:h(["btn btn-outline-primary me-3 rounded-0",{disabled:!o.totalCart}]),onClick:s[0]||(s[0]=f(t=>{n.message="確定要清空購物車嗎?",n.delFunc=o.removeAllCart,this.$refs.deleteModal.open()},["prevent"]))},"清空購物車",2),d(C,{to:"/checkout",class:h(["btn btn-primary rounded-0",{disabled:!o.totalCart}])},{default:k(()=>[M("結帳")]),_:1},8,["class"])])]),d(g,{ref:"deleteModal",message:n.message,"del-func":n.delFunc},null,8,["message","del-func"]),d($,{active:o.isLoading,"onUpdate:active":s[1]||(s[1]=t=>o.isLoading=t)},null,8,["active"])],64)}const ee=v(q,[["render",W]]);export{ee as default};
